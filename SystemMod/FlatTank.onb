<!DOCTYPE OMNotebook>
<Notebook>
  <GroupCell closed="false" >
    <GroupCell closed="false" >
      <TextCell style="Title" >
        <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:10px; margin-bottom:10px; margin-left:10px; margin-right:10px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Arial'; font-size:38pt; font-weight:600; color:#000000;">Using the Traditional Approach&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
      </TextCell>
      <TextCell style="Text" >
        <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">&lt;br />Below, we show how to model a tank system using the traditional approach.&lt;br />&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
      </TextCell>
      <TextCell style="Text" >
        <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">&lt;img src="file:///C:/OpenModelica1.5.0-svn/OMNotebook/DrModelica/OMNoteboook_tempfiles/58.png" width="402" height="128" />&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        <Image name="file:///C:/OpenModelica1.5.0-svn/OMNotebook/DrModelica/OMNoteboook_tempfiles/58.png" >AAAAAYlQTkcNChoKAAAADUlIRFIAAAGSAAAAgAgDAAAAFjUf7AAAAwBQTFRFAAAAwMDA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXxqxmgAAAAlwSFlzAAALEwAACxMBAJqcGAAABkxJREFUeJztnIuSpCAMRbP8/0dv7XYjSXgIIWigc6ucnlaMkSNcRGcguIwJ3k7AxeVIzMmRmJMjMSdHYk6OxJwciTk5EnNyJObkSMzJkZiTIzEnR2JOjsScHIk5ORJzciTmBNk3jcU1IVaBoKF3zuQYZUjCdBtxJHPiSBT6LUcyJ+YlMOcH8I3hmlDWSuRM3N91VPMSaSz3kmlVvUQaLHqJj9KkMuIljiSp7SXfyzdexvEHfNjRjdM+5Pqo6SXYHK4NQO9eEqsZL3EkSU0vAfRBkJQ2XmUcyZzaXgKASZSRYHeGa8WgsTuSpNv7kmLHhfaExr79CTiSpNv7kn4kMi9pIGkEugYWB7K89RKOBNiKWS+RIzm1ffV4CRrnAqR2wDeGxGw4gTqST/irFACZrCaF/g/O43ecGmw18XbrJWOhVL0E9ZWxFO46qYt9eJGtqTFvBKTDSwZjaXsJY0DdLFY19zi2erPOreklkmDKXhIHyhEJ4I4sUiFrIa1OOS1TFnr4mrwJib1EvOi3ks8XYnLFQoA2EUJDGQ1pOZJ5HqUsOxKQIIGs0EokdMQAqH2Ga8oP9a6o3PCR+IHDNA99JPmPAhLItmoiYSFpPbEceDnBofBXDQkSqCKhE834WgzoVpGsDfyS1kISQgY/v2wYEvmh3lMDiSWNImHDEMGh3tOhSOhukkO9J0dSOdR7kiF5PG1u72ide0mQjWNmxQfBIQ0k+BADWLnRI6nkOyEBktdzXqvXT28YyV5ziAK9fn6DSI4HsgLJYMQykkoQg0D0U9oKyS8AsYqkeKYWm8geQRe1EotA1qS0CZLfAfIgktoMcReSHwLyEJLWjH2HlzzYRBY/iejLYXXEu7RvW8mjfVbfsVBKLyAZ305q874+K0gMX6HkuDsh6a2yCpI/HXoFCTurRTn8f2Z/1SB6HIZnl/FTsuZUJ/TjiLEKvZ1VJJ3TDLM5fN6vQDPOaNIfULmQ3jqsPxAY7VC2aiX5qS1rJbT6G0ho2QxJenowlMA2SBR26AvJkMQuKTWaEP0Wlc2e98fmcRiSm7HFI0hSpeNDJk8JhfW4t9JAYshLapk8iKTlJZ9fyqhSRBUJkQhqCKpfPmtsIIG6l5DLumTvofifcUbfonwQyc3+BpB8Lfqq8ss0Yt/EHKcUMavj0rrmMoAEEO7B0V7Kt24N7yDRj0h5CP6jVD+S2KzSx3i+9I6LbT4BCbveZW9+P4skHI5kxkPGvcSRdEWUe8i9l/BbA2Uk+Y3HGUjkHnLt224aKPdlreQkJFMeEpduJPTNUOmI63AkMx5y7yV5pekmz389A4nCX6E6Et2Ik31W6PYSdZ2KZJpH8I5LNd7MOCstjkQtGpARjHvJZA7VNcVNhWLk3u1aerMQeEln9AGdhSS9ThEUmLyFxOTdO8TU4kaIXxkSMhOOnyoqMOmfUNFVoTqMIPn2QBFJ7JAIElzhBE6JRylzyL71eEm5wWipUB3VAXNlhxU5hEAYQCgjSXuzN3hDgckNkgEveRqJ9g6SkJ8qST0X0K9kx2JNF5h8d4ds/usqwBdHwtYUjIEXriMptRPS9FDbI82oy0sciQRJy0toN1jtuxwJX5Pqm/zoRVLzEtT9QcRd3Me9JF9zDSlwXcq9JJXGSFpMHIlqxDsvQZ/uJU+ErHrJp0eqIHnaSyr7Houk4CXfQTBvJbFj5IsjUY1YZNKRxlovSV1nvDmKK9nUw5j2QFJuJx15LPUSfgA82KDd55A2QTLMIyay1Evo+A74tZOyGIyqrvVeIloWIrlujiD2WzN/M70HEh0mXW8vDOWVxhO8leBCo2c7usMbIXWevaundb2CF67H0eTiicmPRlXLb2FImOYRYMWZxphpJH51ZFmZ4aCasuol6mn16VAkKkzU06plylYNx1DJZHFIq15SzJVTORWJUS+ppDv3X2p2QbKZlyAqhyLZxkt40pLj7oFkIy/JdCoSrTbSdwuvK8HZasuol6hn1SNJ69wDyZ48/kn2l47qWSyIuCsTQb+1C5JNmYiOvAuSTZlItAcSFSbvSNJKZsZrlZDa+q37kgUy6iWORDvifL+lnlafDkWys78fisS9ZE7uJUSnjrh+yUsWJLrCSzRuEF7SmUi2liMxJ0diTha6WEdiTo7EnByJOf0Fj0hwlaIiwFoAAAAASUVORK5CYII=</Image>
      </TextCell>
      <TextCell style="" >
        <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table style="-qt-table-type: root;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg'; font-size:8pt;">&lt;span style=" font-family:'Courier New'; font-size:12pt; color:#000000;"> &lt;/span>&lt;span style=" font-family:'Times New Roman'; font-size:12pt; color:#000000;">A tank system with a tank, a source for liquid, and a controller.&lt;/span>&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
      </TextCell>
      <GroupCell closed="false" >
        <TextCell style="Section" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times'; font-size:18pt; font-weight:600; color:#000000;">FlatTank Model&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <TextCell style="Text" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">The &lt;span style=" font-family:'Courier New';">FlatTank&lt;/span> model is a "flat" model of the tank system with no internal hierarchical "system structure" visible, i.e., just a collection of variables and equations that model the system dynamics. The internal system structure consisting of components, interfaces, couplings between the components, etc. is not reflected by this model.&lt;br />&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>model FlatTank
 // Tank related variables and parameters
  parameter Real flowLevel(unit = "m3/s") = 0.02;
  parameter Real area(unit = "m2")        = 1;
  parameter Real flowGain(unit = "m2/s")  = 0.05;
  Real           h(start = 0, unit = "m")     "Tank level";
  Real           qInflow(unit = "m3/s")       "Flow through input valve";
  Real           qOutflow(unit = "m3/s")      "Flow through output valve";

 // Controller related variables and parameters
  parameter Real K = 2                     "Gain";
  parameter Real T(unit = "s")  = 10       "Time constant";
  parameter Real minV = 0,  maxV = 10;  // Limits for flow output
  Real           ref = 0.25                "Reference level for control";
  Real           error                     "Deviation from reference level";
  Real           outCtr                    "Control signal without limiter";
  Real           x                         "State variable for controller";

equation
  assert(minV>=0, "minV must be greater or equal to zero");
  der(h)   = (qInflow - qOutflow)/area;           // Mass balance equation
  qInflow    = if time > 150 then 3*flowLevel else flowLevel;
  qOutflow   = limitValue(minV, maxV, -flowGain*outCtr);
  error    = ref - h;
  der(x)   = error/T;
  outCtr   = K*(error + x);
end FlatTank;</Input>
          <Output>{FlatTank}</Output>
        </GraphCell>
      </GroupCell>
      <GroupCell closed="false" >
        <TextCell style="Section" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times'; font-size:18pt; font-weight:600; color:#000000;">The limitValue Function&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <TextCell style="Text" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">A &lt;span style=" font-style:italic;">limiter function&lt;/span> is needed in the model to reflect minimum and maximum flows through the output valve:&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>function limitValue
  input  Real pMin;
  input  Real pMax;
  input  Real p;
  output Real pLim;
 algorithm
  pLim := if p>pMax then pMax
          else if p&lt;pMin then pMin
          else p;
end limitValue;</Input>
          <Output>{limitValue}</Output>
        </GraphCell>
      </GroupCell>
      <GroupCell closed="false" >
        <TextCell style="Section" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times'; font-size:18pt; font-weight:600; color:#000000;">Examples of Calling limitValue&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <TextCell style="Text" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">Three calls. a) 6 is between 4 and 10;  b) 3 is less than 4 which is returned; c) 12 is greater than 10 which is returned.&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>limitValue(4, 10, 6)</Input>
          <Output>6.0</Output>
        </GraphCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>limitValue(4, 10, 3)</Input>
          <Output>4.0</Output>
        </GraphCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>limitValue(1, 10, 12)</Input>
          <Output>10.0</Output>
        </GraphCell>
      </GroupCell>
      <GroupCell closed="true" >
        <TextCell style="Section" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times'; font-size:18pt; font-weight:600; color:#000000;">Take a Look at the Flattened FlatTank Class&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>instantiateModel(FlatTank)</Input>
          <Output>"fclass FlatTank
parameter Real flowLevel(unit = "m3/s") = 0.02;
parameter Real area(unit = "m2") = 1;
parameter Real flowGain(unit = "m2/s") = 0.05;
Real h(unit = "m", start = 0.0) "Tank level";
Real qInflow(unit = "m3/s") "Flow through input valve";
Real qOutflow(unit = "m3/s") "Flow through output valve";
parameter Real K = 2 "Gain";
parameter Real T(unit = "s") = 10 "Time constant";
parameter Real minV = 0;
parameter Real maxV = 10;
Real ref = 0.25 "Reference level for control";
Real error "Deviation from reference level";
Real outCtr "Control signal without limiter";
Real x "State variable for controller";
equation
assert(minV >= 0.0,"minV must be greater or equal to zero");
  der(h) = (qInflow - qOutflow) / area;
  qInflow = if time > 150.0 then 3.0 * flowLevel else flowLevel;
  qOutflow = limitValue(minV,maxV,(-flowGain) * outCtr);
  error = ref - h;
  der(x) = error / T;
  outCtr = K * (error + x);
end FlatTank;
"</Output>
        </GraphCell>
      </GroupCell>
      <GroupCell closed="false" >
        <TextCell style="Section" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times'; font-size:18pt; font-weight:600; color:#000000;">Simulation of FlatTank&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="0.1" Antialiasing="false" MinorY="0.1" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="1" MajorY="1" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>simulate( FlatTank, stopTime=250 )</Input>
          <Output>record SimulationResult
    resultFile = "Simulation failed.
Error: Internal error Code generation of Modelica functions failed. 
"
end SimulationResult;</Output>
        </GraphCell>
        <TextCell style="Output" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;/p>
&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;/p>
&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;/p>
&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-size:11pt; color:#000000;">&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
        <GraphCell AutoX="true" AutoY="true" style="Graph" MinorX="5" Antialiasing="false" MinorY="2.5" Title="Plot by OpenModelica" LogX="false" LogY="false" MajorX="10" MajorY="5" closed="false" YLabel="" Area="wEgAAAAAAADALgAAAAAAAEBYwAAAAAAAQD0AAAAAAAA=" ShowGraph="false" Grid="true" XLabel="" Legend="false" >
          <Input>plot( h );</Input>
          <Output>[done]</Output>
        </GraphCell>
        <TextCell style="Text" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">&lt;img src="file:///C:/OpenModelica1.5.0-svn/OMNotebook/DrModelica/OMNoteboook_tempfiles/59.png" width="288" height="214" />&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
          <Image name="file:///C:/OpenModelica1.5.0-svn/OMNotebook/DrModelica/OMNoteboook_tempfiles/59.png" >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</Image>
        </TextCell>
        <TextCell style="Text" >
          <Text>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal;">
&lt;table border="0" style="-qt-table-type: root; margin-top:5px; margin-bottom:5px; margin-left:5px; margin-right:5px;">
&lt;tr>
&lt;td style="border: none;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Times New Roman'; font-size:12pt; color:#000000;">&lt;span style=" font-family:'Courier New'; font-weight:600;">Diagram 1:&lt;/span>&lt;span style=" font-family:'Courier New';">  Simulation of the FlatTank model with plot of the tank level.&lt;br />&lt;/span>&lt;/p>&lt;/td>&lt;/tr>&lt;/table>&lt;/body>&lt;/html></Text>
        </TextCell>
      </GroupCell>
    </GroupCell>
  </GroupCell>
</Notebook>
