<!DOCTYPE OMNotebook>
<Notebook>
 <GroupCell closed="false" >
  <GroupCell closed="false" >
   <TextCell style="Title" >
    <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Arial; font-size:38pt; font-weight:600; color:#000000;">Design Optimization&lt;/p>&lt;/body>&lt;/html></Text>
   </TextCell>
   <TextCell style="Text" >
    <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />An important use for modeling and simulation is to improve a system design, usually before it is physically realized and manufactured. In this process it is customary to perform a number of simulations for different values of the design parameters, until a design has been obtained that best fulfills a given set of design criteria. To automate this process it is very useful if the simulation environment has programmable scripting facilities that provide the glue between optimization algorithms, executing simulations and various computational functions.&lt;br />&lt;br />The following example demonstrates the solution of a small but non-trivial design optimization problem containing dynamic system simulations. First we define a Modelica model of a &lt;span style=" font-style:italic;">linear actuator&lt;/span> with a spring damped stopping, as well as a first order system that will be used to generate a kind of "reference" response. The goal is to find a damping for the translational spring-damper that minimizes the deviation between the step response of the linear actuator system and the step response from our "reference" first order system. &lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">See Section 15.7 in the Modelica Book&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
   </TextCell>
   <GroupCell closed="false" >
    <TextCell style="Section" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times; font-size:18pt; font-weight:600; color:#000000;">LinearActuator Model&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <TextCell style="Text" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">In this example we use the MathModelica environment with Mathematica as the scripting language providing the built-in optimization function &lt;span style=" font-family:Courier New;">FindMinimum&lt;/span>. //??Change to OpenModelica&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <TextCell style="Text" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;span style=" color:#000000;">&lt;img src="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/22.png" width="357" height="265" />&lt;/span>&lt;/p>&lt;/body>&lt;/html></Text>
     <Image name="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/22.png" >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</Image>
    </TextCell>
    <TextCell style="" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">A LinearActuator model containing a spring damped connection to an anchoring point.&lt;/span>&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <TextCell style="Text" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />Consider the following model of a linear actuator, depicted in Figure 1, with a spring-damped connection to an anchoring point:&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <InputCell style="Input" closed="false" >
     <Input>model LinearActuator
  import Modelica.Mechanics.Translational;
  import Modelica.Mechanics.Rotational;
  import Modelica.Blocks.Sources;
  Translational.SlidingMass   slidingMass1(m=0.5);
  Translational.SpringDamper  springDamper1(d=3,c=20);
  Translational.Fixed         fixed1;
  Rotational.IdealGearR2T     idealGearR2T1;
  Rotational.Inertia          inertia1(J=0.1);
  Rotational.SpringDamper     springDamper2(c=15,d=2);
  Rotational.Inertia   	 inertia2(J=0.1);
  Rotational.Torque           torque1;
  Sources.Step                step1;
equation
  connect(inertia1.flange_b,      idealGearR2T1.flange_a);
  connect(idealGearR2T1.flange_b, slidingMass1.flange_a);
  connect(slidingMass1.flange_b,  springDamper1.flange_a);
  connect(springDamper1.flange_b, fixed1.flange_b);
  connect(inertia1.flange_a,      springDamper2.flange_b);
  connect(springDamper2.flange_a, inertia2.flange_b);
  connect(inertia2.flange_a,      torque1.flange_b);
  connect(torque1.tau, step1.y);
end LinearActuator;</Input>
     <Output>Ok</Output>
    </InputCell>
    <TextCell style="Text" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />We first make a simulation of the step response for the above linear actuator with damping &lt;span style=" font-family:Courier New;">d=2&lt;/span> and store the result in the scripting language variable called &lt;span style=" font-family:Courier New;">resLinActFirst&lt;/span>. Then we plot the simulated position of the sliding mass as a function of time to take a closer look at the response.&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
   </GroupCell>
   <GroupCell closed="false" >
    <TextCell style="Section" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times; font-size:18pt; font-weight:600; color:#000000;">Simulation of LinearActuator&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <InputCell style="Input" closed="false" >
     <Input>loadModel(Modelica);  // Load library if not already done</Input>
     <Output>[done]</Output>
    </InputCell>
    <InputCell style="Input" closed="false" >
     <Input>simulate( LinearActuator, stopTime=5 )</Input>
     <Output>record
    resultFile = "LinearActuator_res.plt"
end record</Output>
    </InputCell>
    <InputCell style="Input" closed="false" >
     <Input>plot( slidingMass1.s )</Input>
     <Output>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Courier New; font-size:11pt; color:#000000;">&lt;img src="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/25.png" width="492" height="250" />&lt;/p>&lt;/body>&lt;/html></Output>
     <Image name="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/25.png" >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</Image>
    </InputCell>
    <TextCell style="Output" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Courier New; font-size:11pt; color:#000000;">&lt;span style=" color:#000000;">&lt;img src="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/23.png" width="386" height="287" />&lt;/span>&lt;/p>&lt;/body>&lt;/html></Text>
     <Image name="file:///C:/OpenModelica1.4.2/bin/OMNoteboook_tempfiles/23.png" >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</Image>
    </TextCell>
    <TextCell style="" >
     <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">Plot of step response from the linear actuator.&lt;/span>&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
    </TextCell>
    <GroupCell closed="false" >
     <TextCell style="Subsection" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times; font-size:14pt; font-weight:600; color:#000000;">Different behavior with different values of d&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">Assume that we have some freedom in choosing the damping in the translational spring-damper. A number of simulation runs show what kind of behavior we have for different values of the damping parameter &lt;span style=" font-family:Courier New;">d&lt;/span>. The Mathematica &lt;span style=" font-family:Courier New;">Table[]&lt;/span> function is used to collect the results from calls to &lt;span style=" font-family:Courier New;">Simulate[]&lt;/span> into an array &lt;span style=" font-family:Courier New;">res&lt;/span>. The array then contains the results from simulations of &lt;span style=" font-family:Courier New;">LinearActuator&lt;/span> with a damping of 2 and 14 in increments of 2, i.e. seven simulations are performed. &lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">//?? Currently needs Mathematica and needs to be transformed to OpenModelica scripting.&lt;br /> &lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>res = Table[Simulate[LinearActuator,{t,0,4},
	ParameterValues ->{springDamper1.d == s}], {s,2,15,2}];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>PlotSimulation[slidingMass1.s[t], {t, 0, 4}, 
	SimulationResult -> res, Legend -> False]</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">Plots of step responses from seven simulations of the linear actuator with different camping coefficients.&lt;/span>&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">Now assume that we would like to choose the damping parameter d so that the resulting linear actuator system behaves as closely as possible to the following "reference" first order system response, obtained by solving a first order ODE using the Mathematica differential equation solver &lt;span style=" font-family:Courier New;">NDSolve&lt;/span>:&lt;br />&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>resReference = NDSolve[{0.2*y'[t]+y[t]== 0.05, y[0] == 0}, {y}, {t,0,4}];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />We make a plot to compare the step response we simulated first for a damping value d=2 and the response from the [OpenCurlyDoubleQuote]reference[CloseCurlyDoubleQuote] first order system.&lt;br />&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>PlotSimulation[{slidingMass1.s[t], y[t] /. resReference, {t,0,4},
	SimulationResult -> resLinActFirst]</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">Comparison plot between the step response of the linear actuator and the "reference" first&lt;/span>&lt;/p>&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">-order system.&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
    </GroupCell>
    <GroupCell closed="false" >
     <TextCell style="Subsection" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times; font-size:14pt; font-weight:600; color:#000000;">Simulation of an integral&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">Now, let us make things a little more automatic. Simulate and compute the integral of the square deviation from t = 0 to t = 4. This integral is a measure of the deviation from the "reference" response and is thus suitable as a goal function to be minimized.&lt;br />&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">//??Below needs Mathematica and needs to be transformed to OpenModelica scripting&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>Simulate[LinearActuator,{t,0,4},
	ParameterValues -> {springDamper1.d == 3}];</Input>
      <Output></Output>
     </InputCell>
     <InputCell style="Input" closed="true" >
      <Input>NIntegrate[First[(y[t] /. resReference) - slidingMass1.s[t]]^2, {t, 0, 4}]
</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">We define a Mathematica function, &lt;span style=" font-family:Courier New;">f[a_]&lt;/span>, doing the same thing as above, but for different values of the spring-damper design parameter &lt;span style=" font-family:Courier New;">d&lt;/span>. The function contains two variables &lt;span style=" font-family:Courier New;">res&lt;/span> and &lt;span style=" font-family:Courier New;">t&lt;/span>. The expression &lt;span style=" font-family:Courier New;">(y[t]/.resReference)&lt;/span> retrieves the interpolating function representing the variable &lt;span style=" font-family:Courier New;">y[t]&lt;/span>, i.e. the reference response.&lt;br />&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>f[a_] := Module[{res, t}, 
 res=Simulate[LinearActuator, {t, 0, 4},ParameterValues ->{springDamper1.d == a}];
  NIntegrate[First[(y[t]/.resReference)-slidingMass1.s[t]]2,{t,0,4}]];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">We tabulate some results for &lt;span style=" font-style:italic;">2 [LessEqual] d [LessEqual] 10&lt;/span> into an array &lt;span style=" font-family:Courier New;">resDeviations&lt;/span>:&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>resDeviations = Table[{d, f[d]}, {d, 2, 10, 0.5}];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">The tabulated values are interpolated into a Mathematica interpolating function. The default interpolation order is 3.&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>fpre=Interpolation[resDeviations]</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">A plot of the interpolationg function fpre:&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>Plot[fpre[d], {d, 2, 10}];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">Plot of the deviation function for finding the value of the damping parameter that gives a minimum deviation from the reference response.&lt;/span>&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />The minimizing value of &lt;span style=" font-family:Courier New;">d&lt;/span> can be computed using &lt;span style=" font-family:Courier New;">FindMinimum&lt;/span>.&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>FindMinimum[fpre[d], {d, 4}]</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">A simulation with the optimal parameter value:&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>Simulate[LinearActuator, {t, 0, 4}, 
	ParameterValues -> {springDamper1.d == 5.28642}];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="Text" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;br />A plot comparing the [OpenCurlyDoubleQuote]reference[CloseCurlyDoubleQuote] first order system and linear actuator system responses together with a plot of the squared deviation amplified by a factor 100.&lt;br />&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
     <InputCell style="Input" closed="true" >
      <Input>PlotSimulation[{slidingMass1.s[t], 
	y[t] /. resReference, 
	100*(slidingMass1.s[t] - (y[t] /. resReference))^2},
	{t, 0, 4}, Legend -> False];</Input>
      <Output></Output>
     </InputCell>
     <TextCell style="" >
      <Text>&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;/head>&lt;body style=" white-space: pre-wrap; font-family:MS Shell Dlg; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;">&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;">&lt;span style=" font-family:Times New Roman; font-size:12pt; color:#000000;">Comparison plot of the first and second order system step responses together with the squared error.&lt;/span>&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:Times New Roman; font-size:12pt; color:#000000;">&lt;/p>&lt;/body>&lt;/html></Text>
     </TextCell>
    </GroupCell>
   </GroupCell>
  </GroupCell>
 </GroupCell>
</Notebook>
